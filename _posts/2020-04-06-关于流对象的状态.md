---
layout: post
title: "关于流对象的状态"
date: 2020-04-06
author: ZhichenRen
color: rgb(0,230,200)
cover: '../assets/20200405.jpg'
tags: c++
---

## 流对象

### 一个流对象有以下条件状态：

#### strm:: iostate, strm : :badbit, strm : : failbit, strm::eofbit, strm::goodbit

### 以及对应的函数：

#### s.eof(),s.fail(),s.bad(),s.good(),s.clear(),s.clear(flags)等。

### 通常badbit一旦被置位，流对象就不可被使用了，相对的，若是failbit被置位，可以通过clear()等方法修正。

### 我们通过流对象提供的函数查询流对象的各条件状态，eof()与bad()对应的eofbit与badbit较为特殊，分别对应读到文件末尾以及流崩溃，通常情况下使用good()与fail()来查询流当前是否正常。

### 例如如下代码：

```c++
unsigned int i;
cin>>i;
if(cin.fail())
{
    cout<<"Error!\n";
}
cout<<i<<'\n';
```

### 如果输入了一个字符，那么cin.fail()便会返回true，cin.eof()与cin.bad()则会返回false。此时cin进入错误状态，无法继续读取，除非我们将其状态恢复，若输出i的值会得到0。

### 然而cin.fail()无法识别出int与unsigned int的区别，若改为输入-1，cin.fail()将返回false，输出i的值则会得到一个大整数。